(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{449:(e,t,s)=>{"use strict";s.d(t,{ThemeToggle:()=>l});var r=s(5155),n=s(1458),a=s(3998);function l(){let{resolvedTheme:e,setTheme:t}=(0,n.D)();return(0,r.jsx)(a.$,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),className:"w-9 h-9",title:"dark"===e?"Mode clair":"Mode sombre",children:"dark"===e?(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}},1458:(e,t,s)=>{"use strict";s.d(t,{D:()=>o,ThemeProvider:()=>l});var r=s(5155),n=s(2115);let a=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,n.useState)("system"),[o,i]=(0,n.useState)("light");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e&&l(e)},[]),(0,n.useEffect)(()=>{let e=document.documentElement,t=t=>{t?(e.classList.add("dark"),i("dark")):(e.classList.remove("dark"),i("light"))};if("system"===s){let e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);let s=e=>t(e.matches);return e.addEventListener("change",s),()=>e.removeEventListener("change",s)}t("dark"===s)},[s]),(0,r.jsx)(a.Provider,{value:{theme:s,setTheme:e=>{l(e),localStorage.setItem("theme",e)},resolvedTheme:o},children:t})}function o(){let e=(0,n.useContext)(a);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},2627:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,6709)),Promise.resolve().then(s.bind(s,3001)),Promise.resolve().then(s.bind(s,5165)),Promise.resolve().then(s.bind(s,449))},5165:(e,t,s)=>{"use strict";s.d(t,{SuggestButton:()=>h});var r=s(5155),n=s(2115),a=s(7650),l=s(63),o=s(3998),i=s(5142),d=s(4466),u=s(1158),c=s(9286),m=s(9516);function h(e){let{isLoggedIn:t}=e,[s,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[g,w]=(0,n.useState)(null),[v,f]=(0,n.useState)(!1),[k,j]=(0,n.useState)(!1),[b,y]=(0,n.useState)(null),N=(0,l.useRouter)(),C=(0,m.t)();(0,n.useEffect)(()=>{j(!0)},[]);let S=(0,n.useCallback)(e=>{y(e)},[]),L=async e=>{e.preventDefault(),w(null),f(!0);let t=new FormData(e.currentTarget);b&&t.set("turnstileToken",b);let s=p?await (0,u.H)(t):await (0,c.J)(t);s.error?(w(s.error),f(!1)):(h(!1),f(!1),N.push("/suggest/new"))},P=()=>{h(!1),w(null),x(!1)},E=s&&k?(0,a.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[100]",onClick:e=>e.target===e.currentTarget&&P(),children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-sm w-full p-6 shadow-xl animate-in fade-in zoom-in-95 duration-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:p?C.auth.signUp:C.auth.signIn}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Connectez-vous pour proposer un nouveau sujet \xe0 la communaut\xe9."}),g&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm",children:g}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-3",children:[p&&(0,r.jsx)(i.p,{name:"username",type:"text",placeholder:C.auth.username,required:!0,minLength:3,autoComplete:"username"}),(0,r.jsx)(i.p,{name:"email",type:"email",placeholder:C.auth.email,required:!0,autoComplete:"email"}),(0,r.jsx)(i.p,{name:"password",type:"password",placeholder:C.auth.password,required:!0,minLength:8,autoComplete:p?"new-password":"current-password"}),p&&(0,r.jsx)(i.p,{name:"passwordConfirm",type:"password",placeholder:C.auth.confirmPassword,required:!0,minLength:8,autoComplete:"new-password"}),(0,r.jsx)(d.X,{onVerify:S}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,r.jsx)(o.$,{type:"submit",disabled:v,className:"flex-1",children:v?C.auth.loading:p?C.auth.signUp:C.auth.signIn}),(0,r.jsx)(o.$,{type:"button",variant:"outline",onClick:P,children:C.auth.cancel})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{x(!p),w(null),y(null)},className:"mt-4 text-sm text-slate-500 hover:text-indigo-600 w-full text-center transition-colors",children:p?C.auth.hasAccount:C.auth.noAccount})]})}),document.body):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{t?N.push("/suggest/new"):h(!0)},className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium text-white bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full shadow-md shadow-indigo-500/20 hover:shadow-lg hover:shadow-indigo-500/30 transition-all hover:scale-105",children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:"âœ¨"}),(0,r.jsx)("span",{className:"sm:hidden",children:"+"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:C.home.suggestTopic}),(0,r.jsx)("span",{className:"sm:hidden",children:"Proposer"})]}),E]})}}},e=>{e.O(0,[909,218,356,989,441,255,358],()=>e(e.s=2627)),_N_E=e.O()}]);