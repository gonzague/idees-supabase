(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},1774:(e,t,r)=>{"use strict";r.d(t,{VoteButton:()=>d});var s=r(5155),a=r(2115),n=r(926);let o=(0,n.createServerReference)("40442bf27ec4732e324781475c30af353aaa551e16",n.callServer,void 0,n.findSourceMapURL,"toggleVote");var l=r(3998),i=r(7531);function d(e){let{suggestionId:t,initialVoteCount:r,initialHasVoted:n}=e,[d,c]=(0,a.useTransition)(),[u,h]=(0,a.useOptimistic)({voteCount:r,hasVoted:n},(e,t)=>({voteCount:e.voteCount+(t?1:-1),hasVoted:t}));return(0,s.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>{c(async()=>{h(!u.hasVoted),await o(t)})},disabled:d,className:(0,i.cn)("flex flex-col items-center justify-center gap-0.5 h-auto py-2 min-w-[60px] rounded-xl border transition-all duration-200",u.hasVoted?"bg-indigo-50 border-indigo-200 text-indigo-600 hover:bg-indigo-100 hover:border-indigo-300 dark:bg-indigo-950 dark:border-indigo-800 dark:text-indigo-400":"bg-white border-slate-200 text-slate-500 hover:border-indigo-300 hover:bg-slate-50 hover:text-indigo-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:border-indigo-700 dark:hover:bg-gray-700"),children:[(0,s.jsx)("span",{className:(0,i.cn)("text-xl leading-none transition-transform duration-200",u.hasVoted&&"scale-110"),children:"▲"}),(0,s.jsx)("span",{className:"font-bold text-sm",children:u.voteCount})]})}},2549:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2619,23)),Promise.resolve().then(r.t.bind(r,1356,23)),Promise.resolve().then(r.bind(r,7047)),Promise.resolve().then(r.bind(r,1774))},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(5155),a=r(2115),n=r(7531);let o=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:o="default",...l}=e;return(0,s.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","active:scale-[0.98]",{"bg-indigo-600 text-white shadow-sm hover:bg-indigo-700 hover:shadow-indigo-500/25":"default"===a,"border border-slate-200 dark:border-slate-700 bg-white dark:bg-gray-800 hover:bg-slate-50 dark:hover:bg-gray-700 hover:text-slate-900 dark:text-gray-100 hover:border-slate-300 dark:hover:border-slate-600":"outline"===a,"hover:bg-slate-100 dark:hover:bg-gray-800 text-slate-600 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white":"ghost"===a,"bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow-red-500/25":"destructive"===a},{"h-10 px-4 py-2":"default"===o,"h-8 px-3 text-sm":"sm"===o,"h-12 px-6 text-lg":"lg"===o,"h-10 w-10":"icon"===o},r),ref:t,...l})});o.displayName="Button"},5142:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(5155),a=r(2115),n=r(7531);let o=a.forwardRef((e,t)=>{let{className:r,error:a,...o}=e;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2","text-sm text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500","focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",a&&"border-red-500 focus:ring-red-400",r),ref:t,...o}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:a})]})});o.displayName="Input"},7047:(e,t,r)=>{"use strict";r.d(t,{SearchBar:()=>g});var s=r(5155),a=r(63),n=r(2115),o=r(2619),l=r.n(o),i=r(5142),d=r(9939),c=r(5704);let u="https://gonzague.me";c.env.WORDPRESS_API_URL;let h="gonzague.me";function g(e){let{initialValue:t=""}=e,r=(0,a.useRouter)(),o=(0,a.useSearchParams)(),[c,g]=(0,n.useTransition)(),[x,m]=(0,n.useState)(t),[b,f]=(0,n.useState)(!1),[v,p]=(0,n.useState)(null),[k,j]=(0,n.useState)(!1),[y,w]=(0,n.useState)(-1),N=(0,n.useRef)(null),S=(0,n.useRef)(null),D=function(e,t){let[r,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{s(e)},300);return()=>clearTimeout(t)},[e,300]),r}(x,300),R=v?[...v.suggestions.map(e=>({type:"suggestion",...e})),...v.external.map(e=>({type:"external",...e}))]:[];(0,n.useEffect)(()=>{(async()=>{if(D.trim().length<2){p(null),f(!1);return}j(!0);try{let e=await (0,d.R)(D);p(e),f(!0),w(-1)}catch(e){p(null)}finally{j(!1)}})()},[D]),(0,n.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&N.current&&!N.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let C=(0,n.useCallback)(e=>{let t=new URLSearchParams(o.toString());e.trim()?t.set("search",e.trim()):t.delete("search"),t.delete("page"),g(()=>{r.push("/?".concat(t.toString()))}),f(!1)},[r,o]),L=v&&v.suggestions.length>0,E=v&&v.external.length>0;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C(x)},className:"relative",children:[(0,s.jsx)(i.p,{ref:N,type:"search",placeholder:"Rechercher suggestions et articles...",value:x,onChange:e=>m(e.target.value),onFocus:()=>x.trim().length>=2&&v&&f(!0),onKeyDown:e=>{if(!b||0===R.length){"Escape"===e.key&&f(!1);return}switch(e.key){case"ArrowDown":e.preventDefault(),w(e=>Math.min(e+1,R.length-1));break;case"ArrowUp":e.preventDefault(),w(e=>Math.max(e-1,-1));break;case"Enter":if(y>=0){e.preventDefault();let t=R[y];"suggestion"===t.type?r.push("/suggestions/".concat(t.id)):window.open(t.url,"_blank"),f(!1)}break;case"Escape":f(!1)}},className:"pr-20"}),(0,s.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1 items-center",children:[k&&(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),x&&!k&&(0,s.jsx)("button",{type:"button",onClick:()=>{m(""),p(null),f(!1);let e=new URLSearchParams(o.toString());e.delete("search"),e.delete("page"),g(()=>{r.push("/?".concat(e.toString()))})},className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"p-1 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors disabled:opacity-50",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),b&&(L||E)&&(0,s.jsxs)("div",{ref:S,className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden max-h-[70vh] overflow-y-auto",children:[L&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700",children:"\uD83D\uDCA1 Suggestions"}),v.suggestions.map((e,t)=>(0,s.jsxs)(l(),{href:"/suggestions/".concat(e.id),onClick:()=>f(!1),className:"flex items-center gap-3 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ".concat(y===t?"bg-indigo-50 dark:bg-indigo-900/30":""),children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400",children:e.voteCount})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:e.title}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"done"===e.status?"text-green-600 dark:text-green-400":"",children:"done"===e.status?"✓ Termin\xe9":"En cours"}),e.hasContent&&(0,s.jsx)("span",{children:"• \uD83D\uDD17 Contenu"})]})]})]},e.id))]}),E&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700 border-t",children:"\uD83D\uDCDD Articles du blog"}),v.external.map((e,t)=>{var r;let a=((null==(r=v.suggestions)?void 0:r.length)||0)+t;return(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>f(!1),className:"flex items-center gap-3 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ".concat(y===a?"bg-indigo-50 dark:bg-indigo-900/30":""),children:[e.thumbnailUrl?(0,s.jsx)("img",{src:e.thumbnailUrl,alt:"",className:"w-12 h-8 object-cover rounded flex-shrink-0"}):(0,s.jsx)("div",{className:"w-12 h-8 rounded bg-gradient-to-br from-orange-100 to-amber-100 dark:from-orange-900/50 dark:to-amber-900/50 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{children:"youtube"===e.platform?"\uD83C\uDFAC":"\uD83D\uDCDD"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:e.title}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[(0,s.jsx)("span",{className:"youtube"===e.platform?"text-red-500":"text-orange-500",children:"youtube"===e.platform?"YouTube":function(){if(h)return h;if(u)try{return new URL(u).hostname}catch(e){}return"Blog"}()}),e.publishedAt&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:new Date(e.publishedAt).toLocaleDateString("fr-FR")})]})]})]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},e.url)})]}),(0,s.jsx)("div",{className:"px-3 py-2 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:(0,s.jsxs)("button",{onClick:()=>C(x),className:"w-full text-left text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300",children:['\uD83D\uDD0D Voir tous les r\xe9sultats pour "',x,'"']})})]}),b&&x.trim().length>=2&&!k&&!L&&!E&&(0,s.jsx)("div",{ref:S,className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 p-4 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:['Aucun r\xe9sultat pour "',x,'"']})})]})}},7531:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(5889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9939:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var s=r(926);let a=(0,s.createServerReference)("40b941cca8bb501f1cd9f9ad826333965d0e004da0",s.callServer,void 0,s.findSourceMapURL,"searchRelatedContent")}},e=>{e.O(0,[909,218,356,441,255,358],()=>e(e.s=2549)),_N_E=e.O()}]);