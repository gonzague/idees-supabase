(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{1031:(e,t,s)=>{"use strict";s.d(t,{AdminCommentRow:()=>c});var a=s(5155),r=s(2115),l=s(3998),n=s(4719),i=s(926);let d=(0,i.createServerReference)("4008cad3ee52eb58d3943cbc50186d5988f853ff9b",i.callServer,void 0,i.findSourceMapURL,"adminDeleteComment");function c(e){let{comment:t}=e,[s,i]=(0,r.useTransition)(),[c,o]=(0,r.useState)(!1);return(0,a.jsxs)("tr",{className:s?"opacity-50":"",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"text-sm",children:["@",t.author_username||"inconnu"]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-600 truncate max-w-xs",title:t.suggestion_title,children:t.suggestion_title||t.suggestion_id})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"text-sm max-w-md truncate",title:t.content,children:t.content})}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("fr-FR")}),(0,a.jsxs)("td",{className:"py-3 px-4",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>o(!0),disabled:s,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Supprimer"}),(0,a.jsx)(n.T,{isOpen:c,title:"Supprimer le commentaire",message:"Cette action est irr\xe9versible. Voulez-vous vraiment supprimer ce commentaire ?",confirmText:"Supprimer",cancelText:"Annuler",onConfirm:()=>{o(!1),i(async()=>{await d(t.id)})},onCancel:()=>o(!1)})]})]})}},1647:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(5155),r=s(7531);function l(e){let{children:t,variant:s="default",className:l}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"default"===s,"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"success"===s,"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":"warning"===s,"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"error"===s},l),children:t})}},4351:(e,t,s)=>{"use strict";s.d(t,{AdminTagManager:()=>u});var a=s(5155),r=s(2115),l=s(3998),n=s(5142),i=s(926);let d=(0,i.createServerReference)("605030fe65c56af2665046761a869ec7bf65c07b61",i.callServer,void 0,i.findSourceMapURL,"createTag"),c=(0,i.createServerReference)("408c3d1f8acf71d4ca119382ebfd9d3b6412067d55",i.callServer,void 0,i.findSourceMapURL,"deleteTag"),o=(0,i.createServerReference)("609285c355183dca2d3ee0ff585494efce118ed4fd",i.callServer,void 0,i.findSourceMapURL,"updateTagIcon");var m=s(6549),x=s(1574);function u(e){let{tags:t}=e,[s,i]=(0,r.useTransition)(),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[v,f]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-700 p-6 space-y-6",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&(f(null),i(async()=>{let e=await d(u.trim(),g||void 0);e.error?f(e.error):(h(""),p(""))}))},className:"flex gap-3 items-center",children:[(0,a.jsx)(x.A,{value:g,onChange:p}),(0,a.jsx)(n.p,{placeholder:"Nouveau tag...",value:u,onChange:e=>h(e.target.value),className:"max-w-xs"}),(0,a.jsx)(l.$,{type:"submit",disabled:s||!u.trim(),children:"Ajouter"})]}),v&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:v}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ".concat((0,m.yC)(t)),children:[(0,a.jsx)(x.A,{value:null!=(r=e.icon)?r:void 0,onChange:t=>{var s;return s=e.id,void i(async()=>{await o(s,t)})}}),(0,a.jsx)("span",{children:e.name}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void i(async()=>{await c(t)})},disabled:s,className:"w-4 h-4 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id)})}),0===t.length&&(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Aucun tag cr\xe9\xe9"})]})}},6682:(e,t,s)=>{"use strict";s.d(t,{AdminSuggestionRow:()=>S});var a=s(5155),r=s(2115),l=s(7650),n=s(2619),i=s.n(n),d=s(1647),c=s(3998),o=s(8388),m=s(926);let x=(0,m.createServerReference)("40f07f5eb3de84847845d80bb37b5400af373a7afb",m.callServer,void 0,m.findSourceMapURL,"deleteSuggestion");var u=s(2086),h=s(5142),g=s(6549),p=s(9516);let v=(0,m.createServerReference)("40804cdcc082dd311886ffbd2442b17f21aba72c4a",m.callServer,void 0,m.findSourceMapURL,"searchContent");function f(e){let{initialQuery:t="",onSelect:s}=e,[l,n]=(0,r.useState)(t),[i,d]=(0,r.useState)([]),[o,m]=(0,r.useTransition)(),[x,u]=(0,r.useState)(!1),f=(0,p.t)(),b=()=>{l.trim()&&m(async()=>{d((await v(l)).all),u(!0)})};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.p,{type:"text",value:l,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b())},placeholder:f.admin.contentSearch.placeholder,className:"flex-1"}),(0,a.jsx)(c.$,{type:"button",onClick:b,disabled:o||!l.trim(),variant:"outline",children:o?f.admin.contentSearch.searching:f.admin.contentSearch.search})]}),x&&0===i.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:f.admin.contentSearch.noResults}),i.length>0&&(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2 border rounded-md p-2",children:i.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>s(e),className:"w-full flex items-start gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md text-left transition-colors",children:[e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:"",className:"w-16 h-12 object-cover rounded flex-shrink-0"}):(0,a.jsx)("div",{className:"w-16 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-xl",children:g.ni[e.platform]||"\uD83D\uDD17"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-sm",children:g.ni[e.platform]||"\uD83D\uDD17"}),(0,a.jsx)("span",{className:"text-sm font-medium line-clamp-1",children:e.title})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2 mt-0.5",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.publishedAt).toLocaleDateString("fr-FR")})]})]},"".concat(e.platform,"-").concat(e.id)))})]})}function b(e){let{suggestionId:t,suggestionTitle:s,onClose:l}=e,[n,i]=(0,r.useTransition)(),[d,o]=(0,r.useState)([{platform:"youtube",url:""}]),[m,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),j=(0,p.t)(),N=(e,t,s)=>{let a=[...d];a[e]={...a[e],[t]:s},o(a)};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:j.admin.markDone.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:s}),m&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md text-sm",children:m}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(null);let s=d.filter(e=>""!==e.url.trim());i(async()=>{let e=await (0,u.a)(t,s);e.error?x(e.error):l()})},children:[(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:j.admin.markDone.addLinks}),d.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{value:e.platform,onChange:e=>N(t,"platform",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:Object.entries(g.YN).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s},t)})}),(0,a.jsx)(h.p,{type:"url",value:e.url,onChange:e=>N(t,"url",e.target.value),placeholder:"https://...",className:"flex-1"}),d.length>1&&(0,a.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>{o(d.filter((e,s)=>s!==t))},children:"\xd7"})]},t)),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{o([...d,{platform:"youtube",url:""}])},children:j.admin.markDone.addLink}),(0,a.jsx)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>b(!v),children:v?j.admin.markDone.closeSearch:"\uD83D\uDD0D ".concat(j.admin.markDone.searchContent)})]}),v&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:(0,a.jsx)(f,{initialQuery:s,onSelect:e=>{let t="blog"===e.platform?"other":e.platform;o([...d.filter(e=>""!==e.url.trim()),{platform:t,url:e.url}]),b(!1)}})})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(c.$,{type:"button",variant:"outline",onClick:l,disabled:n,children:j.auth.cancel}),(0,a.jsx)(c.$,{type:"submit",disabled:n,children:n?j.auth.loading:j.admin.markDone.confirm})]})]})]})})}var j=s(3328),N=s(1293);function y(e){let{suggestionId:t,suggestionTitle:s,links:l,onClose:n}=e,[i,d]=(0,r.useTransition)(),[o,m]=(0,r.useState)(l),[x,u]=(0,r.useState)(""),[v,f]=(0,r.useState)(null);(0,p.t)();let b=()=>{x.trim()&&(f(null),d(async()=>{let e=await (0,j.x)(t,x.trim());e.success&&e.link?(m([...o,e.link]),u("")):f(e.error||"Erreur")}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full p-6 max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"G\xe9rer les liens"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:s}),v&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md text-sm",children:v}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Liens existants"}),0===o.length?(0,a.jsx)("p",{className:"text-sm text-gray-400 italic",children:"Aucun lien"}):(0,a.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[(0,a.jsx)("span",{className:"text-lg",children:g.ni[e.platform]||"\uD83D\uDD17"}),(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-sm text-blue-600 hover:underline truncate",children:e.url}),(0,a.jsx)(c.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void d(async()=>{let e=await (0,N.M)(t);e.success?m(o.filter(e=>e.id!==t)):f(e.error||"Erreur")})},disabled:i,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:"\xd7"})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Ajouter un lien"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.p,{type:"url",value:x,onChange:e=>u(e.target.value),placeholder:"https://youtube.com/watch?v=...",className:"flex-1",onKeyDown:e=>"Enter"===e.key&&b()}),(0,a.jsx)(c.$,{type:"button",onClick:b,disabled:i||!x.trim(),children:i?"...":"Ajouter"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"La miniature YouTube sera r\xe9cup\xe9r\xe9e automatiquement"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(c.$,{type:"button",variant:"outline",onClick:n,children:"Fermer"})})]})})}var k=s(826);function S(e){var t;let{suggestion:s,tags:n}=e,[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[v,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,w]=(0,r.useState)(!1),[C,D]=(0,r.useTransition)(),[R,_]=(0,r.useState)(!1),$=(0,p.t)();(0,r.useEffect)(()=>{_(!0)},[]);let z=(null==(t=s.links)?void 0:t.length)||0,L="done"===s.status;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:s.vote_count}),(0,a.jsx)("span",{className:"text-indigo-400",children:"▲"})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)(i(),{href:"/suggestions/".concat(s.id),className:"hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[(0,a.jsx)("div",{className:"font-medium text-slate-900 dark:text-slate-100 line-clamp-1 max-w-xs lg:max-w-md",children:s.title}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:["@",s.author_username]})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)(d.E,{variant:L?"success":"default",children:L?$.suggestion.status.done:$.suggestion.status.open})}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-slate-500 dark:text-slate-400 hidden sm:table-cell",children:s.created_at?new Date(s.created_at).toLocaleDateString("fr-FR"):"-"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>N(!0),title:$.admin.actions.edit,className:"h-8 w-8 p-0",children:(0,a.jsx)("span",{className:"text-base",children:"✏️"})}),(0,a.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>g(!0),title:"Liens",className:"h-8 w-8 p-0 relative",children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83D\uDD17"}),z>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center",children:z})]}),L?(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{w(!1),D(async()=>{await (0,o.E)(s.id)})},disabled:C,title:$.admin.actions.reopen,className:"h-8 w-8 p-0",children:(0,a.jsx)("span",{className:"text-base",children:C?"...":"\uD83D\uDD04"})}):(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>u(!0),title:$.admin.actions.markDone,className:"h-8 w-8 p-0 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20",children:(0,a.jsx)("span",{className:"text-base",children:"✅"})}),v?(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-1",children:[(0,a.jsx)(c.$,{variant:"destructive",size:"sm",onClick:()=>{D(async()=>{await x(s.id),f(!1)})},disabled:C,className:"h-7 text-xs px-2",children:"Oui"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"h-7 text-xs px-2",children:"Non"})]}):(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>f(!0),title:$.admin.actions.delete,className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:(0,a.jsx)("span",{className:"text-base",children:"\uD83D\uDDD1️"})})]})})]}),R&&m&&(0,l.createPortal)((0,a.jsx)(b,{suggestionId:s.id,suggestionTitle:s.title,onClose:()=>u(!1)}),document.body),R&&h&&(0,l.createPortal)((0,a.jsx)(y,{suggestionId:s.id,suggestionTitle:s.title,links:s.links||[],onClose:()=>g(!1)}),document.body),R&&j&&(0,l.createPortal)((0,a.jsx)(k.o,{suggestion:s,tags:n,onClose:()=>N(!1)}),document.body)]})}},7035:(e,t,s)=>{"use strict";s.d(t,{H:()=>d});var a=s(5155),r=s(5239),l=s(7531);let n={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-12 h-12 text-lg"},i={sm:24,md:32,lg:48};function d(e){var t;let{profile:s,size:d="md",className:c}=e,o=s.avatar_url||null;return(0,a.jsx)("div",{className:(0,l.cn)(n[d],"rounded-full overflow-hidden bg-gradient-to-br from-indigo-100 to-indigo-200 flex-shrink-0 relative",c),children:o?(0,a.jsx)(r.default,{src:o,alt:s.username||"Avatar",width:i[d],height:i[d],className:"w-full h-full object-cover",unoptimized:!0}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-indigo-600 font-semibold",children:(null==(t=s.username)?void 0:t.charAt(0).toUpperCase())||"?"})})}},8587:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,1031)),Promise.resolve().then(s.bind(s,6682)),Promise.resolve().then(s.bind(s,4351)),Promise.resolve().then(s.bind(s,9849))},9849:(e,t,s)=>{"use strict";s.d(t,{AdminUserRow:()=>p});var a=s(5155),r=s(2115),l=s(3998),n=s(1647),i=s(7035),d=s(926);let c=(0,d.createServerReference)("40ffce4f4ee88f79d4d74b4314116ba3873d235012",d.callServer,void 0,d.findSourceMapURL,"toggleUserAdmin"),o=(0,d.createServerReference)("40f930eb3efbd916f9b8d316801f02851ae08c5a81",d.callServer,void 0,d.findSourceMapURL,"toggleUserBan"),m=(0,d.createServerReference)("4058082c225701f98a90eca370ef4cb06b54d03122",d.callServer,void 0,d.findSourceMapURL,"deleteUser"),x=(0,d.createServerReference)("609b265b5ee89073ede3da6ce613be7da6a0f2b57e",d.callServer,void 0,d.findSourceMapURL,"updateUser");var u=s(5142);function h(e){let{user:t,onClose:s}=e,[n,i]=(0,r.useTransition)(),[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(t.username||""),[h,g]=(0,r.useState)(t.is_admin),[p,v]=(0,r.useState)(t.is_banned||!1);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Modifier l'utilisateur"}),d&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-md text-sm",children:d}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(null);let a=o.trim();i(async()=>{let e=await x(t.id,{username:a,is_admin:h,is_banned:p});if(e.success)s();else{var r;c(null!=(r=e.error)?r:"Erreur lors de la mise \xe0 jour")}})},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nom d'utilisateur"}),(0,a.jsx)(u.p,{type:"text",value:o,onChange:e=>m(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("input",{type:"checkbox",checked:h,onChange:e=>g(e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),"Admin"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("input",{type:"checkbox",checked:p,onChange:e=>v(e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),"Banni"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:s,disabled:n,children:"Annuler"}),(0,a.jsx)(l.$,{type:"submit",disabled:n,children:n?"Enregistrement...":"Enregistrer"})]})]})]})})}var g=s(9516);function p(e){let{user:t}=e,[s,d]=(0,r.useTransition)(),[x,u]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),j=(0,g.t)();return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsx)(h,{user:t,onClose:()=>v(!1)}),(0,a.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.H,{profile:t,size:"sm"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:["@",t.username]}),t.is_admin&&(0,a.jsx)(n.E,{variant:"success",children:"Admin"}),t.is_banned&&(0,a.jsx)(n.E,{variant:"error",children:"Banni"})]})]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-slate-500 dark:text-slate-400",children:t.email}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-slate-500 dark:text-slate-400",children:t.created_at?new Date(t.created_at).toLocaleDateString("fr-FR"):"-"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:s,children:"Modifier"}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{d(async()=>{await c(t.id)})},disabled:s,children:t.is_admin?"Retirer admin":"Rendre admin"}),(0,a.jsx)(l.$,{variant:t.is_banned?"outline":"ghost",size:"sm",onClick:()=>{d(async()=>{await o(t.id)})},disabled:s,className:t.is_banned?"":"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:t.is_banned?"D\xe9bannir":"Bannir"}),f&&(0,a.jsx)("span",{className:"text-sm text-red-600",children:f}),x?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l.$,{variant:"destructive",size:"sm",onClick:()=>{b(null),d(async()=>{let e=await m(t.id);if(e.success)u(!1);else{var s;b(null!=(s=e.error)?s:"Erreur lors de la suppression")}})},disabled:s,children:"Confirmer"}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{u(!1),b(null)},children:"Annuler"})]}):(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:j.admin.actions.delete})]})})]})]})}}},e=>{e.O(0,[909,218,356,402,441,255,358],()=>e(e.s=8587)),_N_E=e.O()}]);